<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loan, Buy, Profile, News, and Learning Records</title>
  <link rel="stylesheet" href="superadmin.css">
  <link rel="icon" href="../images/home-logo.png">
  <link rel="stylesheet" href="../top-bar.css">
  <script src="../topbar.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet"> 
  <style>
    
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 8px;
      text-align: center;
    }
    button {
      margin: 2px;
    }
    input[type="text"] {
      width: 100%;
      box-sizing: border-box;
    }
    .section {
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <div class="top-bar-left">
        <span><i class="fas fa-phone"></i> +00 123 456 8910</span>
        <span><i class="fas fa-envelope"></i> animoph@gmail.com</span>
    </div>
    <div class="top-bar-right">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
</div>

<nav>
    <ul class="sidebar">
        <li onclick=hideSidebar()><a href="#" ><i class='bx bx-x'></i></a><hr></li>
        <li class="hideOnPC"><a href="../index.html" >Home</a><hr></li>
        <li class="hideOnPC"><a href="../agriabout.html">About Us</a><hr></li>
        <li class="hideOnPC"><a href="../agri weather/agriweather.html" >Weather</a><hr></li>
        <li class="hideOnPC"><a href="../loan.html" >Loan</a><hr></li>
        <li class="hideOnPC"><a href="../agribuy.html" >Buy</a><hr></li>
        <li class="hideOnPC"><a href="../agrisell.html" >Sell</a><hr></li>
        <li><a href="../Agri profilr/agriprofile.html" >Profile</a></li><hr>
        <li><a href="../Agri News/agrinews.html" >Gov't Updates</a></li><hr>
        <li><a href="../Agri Services/agriservices.html">AniMo Services</a></li><hr>
        <li><a href="../Agri Learning/agrilearning.html">Learning Hub / Guides</a></li><hr>
        <li><a href="agrifeedback.html">Feedback</a></li><hr>
        <li><a href="../adminLogin.html">Admin</a></li><hr>
        <li><a href="../index.html">Log Out</a></li><hr>
    </ul>

    <ul>
        <li id="logo"><a href="#" ><img src = "../images/home-logo.png" alt="logo"></a></li>
        <li class="hideOnMobile"><a href="../index.html" >Home</a></li>
        <li class="hideOnMobile"><a href="../agriabout.html">About Us</a></li>
        <li class="hideOnMobile"><a href="../agri weather/agriweather.html" >Weather</a></li>
        <li class="hideOnMobile"><a href="../loan.html" >Loan</a></li>
        <li class="hideOnMobile"><a href="../agribuy.html" >Buy</a></li>
        <li class="hideOnMobile"><a href="../agrisell.html" >Sell</a></li>
        <li onclick=showSidebar()><a href="#" ><i class='bx bx-menu'></i></a></li>
    </ul>
</nav>
  
  <div class="profile">
    <h1>Super Administrator</h1>
    <div class="profile-pic-wrapper">
        <label for="profileUpload">
          <img id="profileImage" src="user.jpg" alt="Profile Picture" />
          <div class="camera-icon">
            <img src="camera.svg" alt="Upload" />
          </div>
        </label>
        <input type="file" id="profileUpload" accept="image/*" />
      </div>
    
      <h3 id="adminame">Name</h3>
      <p id="adminID">ID Number</p>
        </div>


  <div class="section">
    <h2>Loan Application</h2>
    <button onclick="showAddForm()">Add</button>
    <table>
      <thead>
        <tr>
          <th>Valid ID Type</th>
          <th>Contact Number</th>
          <th>Street</th>
          <th>Barangay</th>
          <th>City/Municipality</th>
          <th>Loan Type</th>
          <th>Mode of Payment</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  
  <div class="section">
    <h2>Buy Records</h2>
    <button onclick="showBuyAddForm()">Add Buy Record</button>
    <table>
      <thead>
        <tr>
          <th>Product Name</th>
          <th>Price</th>
          <th>Delivery Location</th>
          <th>Mode of Payment</th>
          <th>Order Total</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="buyTableBody"></tbody>
    </table>
  </div>

 
  <div class="section">
    <h2>Profile Records</h2>
    <button onclick="showProfileAddForm()">Add Profile</button>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>RSBSA ID</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="profileTableBody"></tbody>
    </table>
  </div>

  
  <div class="section">
    <h2>News Records</h2>
    <button onclick="showNewsAddForm()">Add News</button>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Link</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="newsTableBody"></tbody>
    </table>
  </div>

 
  <div class="section">
    <h2>Learning Post Records</h2>
    <button onclick="showLearningAddForm()">Add Learning Post</button>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Link</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="learningTableBody"></tbody>
    </table>
  </div>


  
<div class="section">
  <h2>Feedback Records</h2>
  <table>
    <thead>
      <tr>
        <th>Reaction</th>
        <th>Comment</th>
        <th>Reply</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="feedbackTableBody"></tbody>
  </table>
</div>



<div class="section">
  <h2>Sell Records</h2>
  <button onclick="showSellAddForm()">Add Sell Record</button>
  <table>
    <thead>
      <tr>
        <th>Category</th>
        <th>Product</th>
        <th>Price</th>
        <th>Location</th>
        <th>Duration</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="sellTableBody"></tbody>
  </table>
</div>

<footer class="footer">
  <hr>
  <div>
      <div class="footer-left">
          <p>Copyright Â© 2025 AniMo.Ph. All Rights Reserved.</p>
      </div>
      <div class="footer-right">
          <p>
              <a href="#">Terms of Use</a> |
              <a href=""> Privacy Policy</a> |
              <a href="">Legal & Policies</a>
          </p>
      </div>
  </div>
</footer> 

<script>






const profileUpload = document.getElementById("profileUpload");
  const profileImage = document.getElementById("profileImage");

  profileUpload.addEventListener("change", function () {
    const file = this.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        profileImage.setAttribute("src", e.target.result);
      };
      reader.readAsDataURL(file);
    }
  });
  
  
  let data = JSON.parse(localStorage.getItem("loanApplications")) || [];
  function saveToLocalStorage() {
    localStorage.setItem("loanApplications", JSON.stringify(data));
  }
  function renderTable() {
    const tableBody = document.getElementById("tableBody");
    tableBody.innerHTML = "";
    data.forEach((entry, index) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${entry.validId}</td>
        <td>${entry.contact}</td>
        <td>${entry.street}</td>
        <td>${entry.barangay}</td>
        <td>${entry.city}</td>
        <td>${entry.loanType}</td>
        <td>${entry.paymentMode}</td>
      `;
      const td = document.createElement("td");
      const edit = document.createElement("button");
      edit.textContent = "Edit";
      edit.onclick = () => editRow(index);
      const del = document.createElement("button");
      del.textContent = "Delete";
      del.onclick = () => deleteRow(index);
      td.append(edit, del);
      row.appendChild(td);
      tableBody.appendChild(row);
    });
  }
  function showAddForm() {
    const tableBody = document.getElementById("tableBody");
    if (document.getElementById("addRow")) return;
    const row = document.createElement("tr");
    row.id = "addRow";
    for (let i = 0; i < 7; i++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.type = "text";
      td.appendChild(input);
      row.appendChild(td);
    }
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Create";
    btn.onclick = () => {
      const inputs = row.querySelectorAll("input");
      const values = [...inputs].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      data.push({
        validId: values[0], contact: values[1], street: values[2],
        barangay: values[3], city: values[4], loanType: values[5], paymentMode: values[6]
      });
      saveToLocalStorage();
      renderTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    tableBody.appendChild(row);
  }
  function editRow(i) {
    const tableBody = document.getElementById("tableBody");
    const row = document.createElement("tr");
    const fields = Object.values(data[i]);
    fields.forEach(val => {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.value = val;
      td.appendChild(input);
      row.appendChild(td);
    });
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Update";
    btn.onclick = () => {
      const inputs = row.querySelectorAll("input");
      const values = [...inputs].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      data[i] = {
        validId: values[0], contact: values[1], street: values[2],
        barangay: values[3], city: values[4], loanType: values[5], paymentMode: values[6]
      };
      saveToLocalStorage();
      renderTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    tableBody.replaceChild(row, tableBody.children[i]);
  }
  function deleteRow(i) {
    if (confirm("Delete this row?")) {
      data.splice(i, 1);
      saveToLocalStorage();
      renderTable();
    }
  }

 
  let buyData = JSON.parse(localStorage.getItem("buyRecords")) || [];
  function saveBuyData() {
    localStorage.setItem("buyRecords", JSON.stringify(buyData));
  }
  function renderBuyTable() {
    const body = document.getElementById("buyTableBody");
    body.innerHTML = "";
    buyData.forEach((e, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${e.product}</td><td>${e.price}</td><td>${e.deliveryLoc}</td>
        <td>${e.paymentMode}</td><td>${e.total}</td>
      `;
      const td = document.createElement("td");
      const approve = document.createElement("button");
      approve.textContent = "Approve";
      approve.onclick = () => alert("Data approved");
      const deny = document.createElement("button");
      deny.textContent = "Deny";
      deny.onclick = () => {
        alert("Data denied, try again");
        buyData.splice(i, 1);
        saveBuyData();
        renderBuyTable();
      };
      td.append(approve, deny);
      row.appendChild(td);
      body.appendChild(row);
    });
  }
  function showBuyAddForm() {
    const body = document.getElementById("buyTableBody");
    if (document.getElementById("buyAddRow")) return;
    const row = document.createElement("tr");
    row.id = "buyAddRow";
    for (let i = 0; i < 5; i++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.type = "text";
      td.appendChild(input);
      row.appendChild(td);
    }
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Create";
    btn.onclick = () => {
      const values = [...row.querySelectorAll("input")].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      buyData.push({
        product: values[0], price: values[1], deliveryLoc: values[2],
        paymentMode: values[3], total: values[4]
      });
      saveBuyData();
      renderBuyTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    body.appendChild(row);
  }

  
  let profileData = JSON.parse(localStorage.getItem("profileRecords")) || [];
  function saveProfileData() {
    localStorage.setItem("profileRecords", JSON.stringify(profileData));
  }
  function renderProfileTable() {
    const body = document.getElementById("profileTableBody");
    body.innerHTML = "";
    profileData.forEach((e, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${e.name}</td><td>${e.rsbsa}</td>`;
      const td = document.createElement("td");
      const approve = document.createElement("button");
      approve.textContent = "Approve";
      approve.onclick = () => alert("Data approved");
      const deny = document.createElement("button");
      deny.textContent = "Deny";
      deny.onclick = () => {
        alert("Data denied, try again");
        profileData.splice(i, 1);
        saveProfileData();
        renderProfileTable();
      };
      td.append(approve, deny);
      row.appendChild(td);
      body.appendChild(row);
    });
  }
  function showProfileAddForm() {
    const body = document.getElementById("profileTableBody");
    if (document.getElementById("profileAddRow")) return;
    const row = document.createElement("tr");
    row.id = "profileAddRow";
    for (let i = 0; i < 2; i++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.type = "text";
      td.appendChild(input);
      row.appendChild(td);
    }
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Create";
    btn.onclick = () => {
      const values = [...row.querySelectorAll("input")].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      profileData.push({ name: values[0], rsbsa: values[1] });
      saveProfileData();
      renderProfileTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    body.appendChild(row);
  }

  
  let newsData = JSON.parse(localStorage.getItem("newsRecords")) || [];
  function saveNewsData() {
    localStorage.setItem("newsRecords", JSON.stringify(newsData));
  }
  function renderNewsTable() {
    const body = document.getElementById("newsTableBody");
    body.innerHTML = "";
    newsData.forEach((e, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${e.title}</td><td>${e.link}</td>`;
      const td = document.createElement("td");
      const approve = document.createElement("button");
      approve.textContent = "Approve";
      approve.onclick = () => alert("Data approved");
      const deny = document.createElement("button");
      deny.textContent = "Deny";
      deny.onclick = () => {
        alert("Data denied, try again");
        newsData.splice(i, 1);
        saveNewsData();
        renderNewsTable();
      };
      td.append(approve, deny);
      row.appendChild(td);
      body.appendChild(row);
    });
  }
  function showNewsAddForm() {
    const body = document.getElementById("newsTableBody");
    if (document.getElementById("newsAddRow")) return;
    const row = document.createElement("tr");
    row.id = "newsAddRow";
    for (let i = 0; i < 2; i++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.type = "text";
      td.appendChild(input);
      row.appendChild(td);
    }
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Create";
    btn.onclick = () => {
      const values = [...row.querySelectorAll("input")].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      newsData.push({ title: values[0], link: values[1] });
      saveNewsData();
      renderNewsTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    body.appendChild(row);
  }

  
  let learningData = JSON.parse(localStorage.getItem("learningPosts")) || [];
  function saveLearningData() {
    localStorage.setItem("learningPosts", JSON.stringify(learningData));
  }
  function renderLearningTable() {
    const body = document.getElementById("learningTableBody");
    body.innerHTML = "";
    learningData.forEach((e, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${e.title}</td><td>${e.link}</td>`;
      const td = document.createElement("td");
      const approve = document.createElement("button");
      approve.textContent = "Approve";
      approve.onclick = () => alert("Data approved");
      const deny = document.createElement("button");
      deny.textContent = "Deny";
      deny.onclick = () => {
        alert("Data denied, try again");
        learningData.splice(i, 1);
        saveLearningData();
        renderLearningTable();
      };
      td.append(approve, deny);
      row.appendChild(td);
      body.appendChild(row);
    });
  }
  function showLearningAddForm() {
    const body = document.getElementById("learningTableBody");
    if (document.getElementById("learningAddRow")) return;
    const row = document.createElement("tr");
    row.id = "learningAddRow";
    for (let i = 0; i < 2; i++) {
      const td = document.createElement("td");
      const input = document.createElement("input");
      input.type = "text";
      td.appendChild(input);
      row.appendChild(td);
    }
    const td = document.createElement("td");
    const btn = document.createElement("button");
    btn.textContent = "Create";
    btn.onclick = () => {
      const values = [...row.querySelectorAll("input")].map(i => i.value.trim());
      if (values.some(v => v === "")) return alert("Fill all fields");
      learningData.push({ title: values[0], link: values[1] });
      saveLearningData();
      renderLearningTable();
    };
    td.appendChild(btn);
    row.appendChild(td);
    body.appendChild(row);
  }

  let feedbackData = JSON.parse(localStorage.getItem("feedbackRecords")) || [];

function saveFeedbackData() {
  localStorage.setItem("feedbackRecords", JSON.stringify(feedbackData));
}

function renderFeedbackTable() {
  const body = document.getElementById("feedbackTableBody");
  body.innerHTML = "";

  feedbackData.forEach((entry, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${entry.reaction}</td>
      <td>${entry.comment}</td>
      <td>${entry.reply}</td>
    `;

    const td = document.createElement("td");

    const approveBtn = document.createElement("button");
    approveBtn.textContent = "Approve";
    approveBtn.onclick = () => alert("Data approved");

    const denyBtn = document.createElement("button");
    denyBtn.textContent = "Deny";
    denyBtn.onclick = () => {
      alert("Data denied, try again");
      feedbackData.splice(index, 1);
      saveFeedbackData();
      renderFeedbackTable();
    };

    td.appendChild(approveBtn);
    td.appendChild(denyBtn);
    row.appendChild(td);

    body.appendChild(row);
  });
}

function loadSubmittedFeedbackFromLocalStorage() {
  const submitted = JSON.parse(localStorage.getItem("submittedFeedbackRecords")) || [];
  if (submitted.length > 0) {
    feedbackData = feedbackData.concat(submitted);
    localStorage.removeItem("submittedFeedbackRecords");
    saveFeedbackData();
  }
  renderFeedbackTable();
}


loadSubmittedFeedbackFromLocalStorage();


  function loadSubmittedExternalRecords() {
  const submittedNews = JSON.parse(localStorage.getItem("submittedNews")) || [];
  const submittedLearning = JSON.parse(localStorage.getItem("submittedLearning")) || [];

  submittedNews.forEach((entry) => {
    newsData.push({ title: entry.title, link: entry.link });
  });

  submittedLearning.forEach((entry) => {
    learningData.push({ title: entry.title, link: entry.link });
  });

  
  localStorage.removeItem("submittedNews");
  localStorage.removeItem("submittedLearning");

  saveNewsData();
  saveLearningData();

  renderNewsTable();
  renderLearningTable();
}

function loadSubmittedBuyRecords() {
  const submitted = JSON.parse(localStorage.getItem("submittedBuyRecords")) || [];
  submitted.forEach(entry => {
    buyData.push(entry);
  });
  localStorage.removeItem("submittedBuyRecords");
  saveBuyData();
  renderBuyTable();
}


let sellData = JSON.parse(localStorage.getItem("sellRecords")) || [];

function saveSellData() {
  localStorage.setItem("sellRecords", JSON.stringify(sellData));
}

function renderSellTable() {
  const body = document.getElementById("sellTableBody");
  body.innerHTML = "";

  sellData.forEach((entry, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${entry.category}</td>
      <td>${entry.product}</td>
      <td>${entry.price}</td>
      <td>${entry.location}</td>
      <td>${entry.duration}</td>
    `;

    const td = document.createElement("td");

    const approveBtn = document.createElement("button");
    approveBtn.textContent = "Approve";
    approveBtn.onclick = () => alert("Data approved");

    const denyBtn = document.createElement("button");
    denyBtn.textContent = "Deny";
    denyBtn.onclick = () => {
      alert("Data denied, try again");
      sellData.splice(index, 1);
      saveSellData();
      renderSellTable();
    };

    td.appendChild(approveBtn);
    td.appendChild(denyBtn);
    row.appendChild(td);

    body.appendChild(row);
  });
}

function showSellAddForm() {
  const body = document.getElementById("sellTableBody");
  if (document.getElementById("sellAddRow")) return;

  const row = document.createElement("tr");
  row.id = "sellAddRow";

  for (let i = 0; i < 5; i++) {
    const td = document.createElement("td");
    const input = document.createElement("input");
    input.type = "text";
    td.appendChild(input);
    row.appendChild(td);
  }

  const td = document.createElement("td");
  const btn = document.createElement("button");
  btn.textContent = "Create";
  btn.onclick = () => {
    const values = [...row.querySelectorAll("input")].map(i => i.value.trim());
    if (values.some(v => v === "")) return alert("Fill all fields");

    sellData.push({
      category: values[0],
      product: values[1],
      price: values[2],
      location: values[3],
      duration: values[4]
    });

    saveSellData();
    renderSellTable();
  };
  td.appendChild(btn);
  row.appendChild(td);
  body.appendChild(row);
}

function loadSubmittedSellRecords() {
  const submitted = JSON.parse(localStorage.getItem("submittedSellRecords")) || [];
  if (submitted.length > 0) {
    sellData = sellData.concat(submitted);  
    localStorage.removeItem("submittedSellRecords"); 
    saveSellData();
    renderSellTable(); 
  }
}


function loadSubmittedProfileRecords() {
  const submitted = JSON.parse(localStorage.getItem("submittedProfileRecords")) || [];
  if (submitted.length > 0) {
    profileData = profileData.concat(submitted);
    saveProfileData();
    localStorage.removeItem("submittedProfileRecords"); 
    renderProfileTable();
  }
}




window.onload = function () {
    const admin = JSON.parse(localStorage.getItem("activeAdmin"));
    if (admin) {
      document.getElementById("adminame").textContent = admin.name;
      document.getElementById("adminID").textContent = admin.id;
    }
  }
  
loadSubmittedProfileRecords(); 


loadSubmittedExternalRecords();
loadSubmittedBuyRecords();
loadSubmittedSellRecords();


  
  renderTable();
  renderBuyTable();
  renderProfileTable();
  renderNewsTable();
  renderLearningTable();
  renderSellTable();

</script>
</body>
</html>
